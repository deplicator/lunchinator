<!DOCTYLE html>
<html>
<head>
    <title>Lunchanator - Decision Making Made Easy</title>
    <style>
        div, button {
            display: block;
            text-align: center;
            margin: 0 auto;
        }
    </style>

</head>

<body>
    <div id="chosen">click the button</div>

    <button id="roll">Choose for Me!</button>

    <script>
        (function() {
            var restaurantList = localStorage.getItem('restaurants');
            var chosenEl = document.getElementById('chosen');
            var rollEl = document.getElementById('roll');

            if(restaurantList !== null) {
                restaurantList = restaurantList.split(',');
                function choseitnow() {
                    var x = Math.floor((Math.random() * restaurantList.length));
                    chosenEl.innerHTML = '<a href="http://maps.google.com/?q=' + restaurantList[x] + '">' + restaurantList[x] + '</a>';
                }
                rollEl.onclick = choseitnow;
            } else {
                load = confirm('You lack restaurant data, load default?');
                if(load) {
                    var restaurantDefault = [
                        'MOD Pizza',
                        'Jersey Mike\'s Subs',
                        'Torchy\'s Tacos',
                        'Smashburger',
                        'Which Wich',
                        'Chipotle Mexican Grill',
                        'Wacky Mongolian Grill & Bbq',
                        'Mo\'s Irish Pub',
                        'Another Broken Egg Cafe',
                        'Carl\'s Jr.',
                        'Santa Fe Flats',
                        'Chick-fil-A',
                        'Whataburger',
                        'Red Robin',
                        'Taste of China',
                        'Free Birds',
                        'Santa Fe Flats',
                        'Juanita\'s Mexican',
                        'Mango Tree Thai Bistro',
                        'Cains'
                    ];
                    localStorage.setItem('restaurants', restaurantDefault.toString());
                    restaurantList = localStorage.getItem('restaurants');
                    restaurantList = restaurantList.split(',');
                    function choseitnow() {
                        var x = Math.floor((Math.random() * restaurantList.length));
                        chosenEl.innerHTML = '<a href="http://maps.google.com/?q=' + restaurantList[x] + '">' + restaurantList[x] + '</a>';
                    }
                    rollEl.onclick = choseitnow;
                }
            }
        })();
    </script>

</body>
</html>
